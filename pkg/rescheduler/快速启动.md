# âš¡ é‡è°ƒåº¦å™¨å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸš€ ä¸€é”®å¯åŠ¨

```bash
# 1. æ„å»ºå¹¶éƒ¨ç½²
make -f Makefile.simple all

# 2. åŠ è½½é•œåƒåˆ°Kindé›†ç¾¤ (å¦‚æœä½¿ç”¨Kind)
make -f Makefile.simple load-image

# 3. éƒ¨ç½²æµ‹è¯•Pod
make -f Makefile.simple test
```

## ğŸ‘€ ç›‘æ§é‡è°ƒåº¦è¿‡ç¨‹

```bash
# å®æ—¶æŸ¥çœ‹é‡è°ƒåº¦æ—¥å¿—
kubectl logs -n kube-system -l app=rescheduler-scheduler -f

# æŸ¥çœ‹Podåˆ†å¸ƒå˜åŒ–
watch "kubectl get pods --all-namespaces -o wide | awk '{print \$8}' | sort | uniq -c"

# æŸ¥çœ‹çŠ¶æ€
make -f Makefile.simple status
```

## ğŸ§¹ æ¸…ç†

```bash
# æ¸…ç†æµ‹è¯•èµ„æº
make -f Makefile.simple clean-test

# å®Œå…¨æ¸…ç†
make -f Makefile.simple clean
```

## ğŸ“‹ é¢„æœŸç»“æœ

**å¯åŠ¨ååº”çœ‹åˆ°:**
```
I0829 03:13:40.048948 1 rescheduler.go:112] "é‡è°ƒåº¦å™¨æ’ä»¶æ­£åœ¨åˆå§‹åŒ–"
I0829 03:13:40.049267 1 rescheduler.go:159] "é‡è°ƒåº¦å™¨å¼€å§‹è¿è¡Œ" interval="30s"
```

**é‡è°ƒåº¦æ´»åŠ¨:**
```
I0829 03:14:10.050254 1 rescheduler.go:170] "å¼€å§‹æ‰§è¡Œé‡è°ƒåº¦æ£€æŸ¥"
I0829 03:14:10.050856 1 controller.go:252] "å¼€å§‹æ‰§è¡ŒPodè¿ç§»" strategy="LoadBalancing"
I0829 03:14:10.087521 1 controller.go:372] "æˆåŠŸåˆ›å»ºç›®æ ‡Pod"
I0829 03:14:10.113996 1 rescheduler.go:219] "å®Œæˆé‡è°ƒåº¦æ“ä½œ" é‡è°ƒåº¦Podæ•°é‡=2
```

**Podåˆ†å¸ƒæ”¹å–„:**
```
# é‡è°ƒåº¦å‰
      1 NODE
     10 rebalancer-control-plane  
     40 rebalancer-worker        # ä¸å‡è¡¡!
      2 rebalancer-worker2
      1 rebalancer-worker3

# é‡è°ƒåº¦å (30ç§’å)
      1 NODE
     10 rebalancer-control-plane
     25 rebalancer-worker        # æ”¹å–„!
     10 rebalancer-worker2       # æ”¹å–„!
      8 rebalancer-worker3       # æ”¹å–„!
```

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

ç¼–è¾‘ `manifests/rescheduler/deployment.yaml` ä¸­çš„å‚æ•°:

```yaml
reschedulingInterval: "30s"    # æ£€æŸ¥é—´éš”
imbalanceThreshold: 20.0       # è´Ÿè½½ä¸å‡è¡¡é˜ˆå€¼(%)  
maxReschedulePods: 10          # å•æ¬¡æœ€å¤§é‡è°ƒåº¦æ•°
```

## ğŸ“ è·å–å¸®åŠ©

```bash
make -f Makefile.simple help
```
