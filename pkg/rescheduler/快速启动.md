# ⚡ 重调度器快速启动指南

## 🚀 一键启动

```bash
# 1. 构建并部署
make -f Makefile.simple all

# 2. 加载镜像到Kind集群 (如果使用Kind)
make -f Makefile.simple load-image

# 3. 部署测试Pod
make -f Makefile.simple test
```

## 👀 监控重调度过程

```bash
# 实时查看重调度日志
kubectl logs -n kube-system -l app=rescheduler-scheduler -f

# 查看Pod分布变化
watch "kubectl get pods --all-namespaces -o wide | awk '{print \$8}' | sort | uniq -c"

# 查看状态
make -f Makefile.simple status
```

## 🧹 清理

```bash
# 清理测试资源
make -f Makefile.simple clean-test

# 完全清理
make -f Makefile.simple clean
```

## 📋 预期结果

**启动后应看到:**
```
I0829 03:13:40.048948 1 rescheduler.go:112] "重调度器插件正在初始化"
I0829 03:13:40.049267 1 rescheduler.go:159] "重调度器开始运行" interval="30s"
```

**重调度活动:**
```
I0829 03:14:10.050254 1 rescheduler.go:170] "开始执行重调度检查"
I0829 03:14:10.050856 1 controller.go:252] "开始执行Pod迁移" strategy="LoadBalancing"
I0829 03:14:10.087521 1 controller.go:372] "成功创建目标Pod"
I0829 03:14:10.113996 1 rescheduler.go:219] "完成重调度操作" 重调度Pod数量=2
```

**Pod分布改善:**
```
# 重调度前
      1 NODE
     10 rebalancer-control-plane  
     40 rebalancer-worker        # 不均衡!
      2 rebalancer-worker2
      1 rebalancer-worker3

# 重调度后 (30秒后)
      1 NODE
     10 rebalancer-control-plane
     25 rebalancer-worker        # 改善!
     10 rebalancer-worker2       # 改善!
      8 rebalancer-worker3       # 改善!
```

## 🔧 自定义配置

编辑 `manifests/rescheduler/deployment.yaml` 中的参数:

```yaml
reschedulingInterval: "30s"    # 检查间隔
imbalanceThreshold: 20.0       # 负载不均衡阈值(%)  
maxReschedulePods: 10          # 单次最大重调度数
```

## 📞 获取帮助

```bash
make -f Makefile.simple help
```
