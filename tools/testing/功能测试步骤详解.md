# ğŸ§ª Scheduler-Plugins åŠŸèƒ½æµ‹è¯•æ­¥éª¤è¯¦è§£

**æµ‹è¯•æ—¥æœŸ**: 2025å¹´09æœˆ12æ—¥  
**æµ‹è¯•ç±»å‹**: åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•  
**æµ‹è¯•ç¯å¢ƒ**: Kind Kubernetesé›†ç¾¤  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  

---

## ğŸ“– ç›®å½•

1. [æµ‹è¯•æ¦‚è¿°](#1-æµ‹è¯•æ¦‚è¿°)
2. [ç¯å¢ƒå‡†å¤‡](#2-ç¯å¢ƒå‡†å¤‡)
3. [é€æ­¥æµ‹è¯•æµç¨‹](#3-é€æ­¥æµ‹è¯•æµç¨‹)
4. [æµ‹è¯•ç»“æœåˆ†æ](#4-æµ‹è¯•ç»“æœåˆ†æ)
5. [é—®é¢˜æ’æŸ¥æŒ‡å—](#5-é—®é¢˜æ’æŸ¥æŒ‡å—)
6. [ç»´æŠ¤å»ºè®®](#6-ç»´æŠ¤å»ºè®®)

---

## 1. æµ‹è¯•æ¦‚è¿°

### 1.1 æµ‹è¯•ç›®æ ‡
- éªŒè¯é¡¹ç›®æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸è¿è¡Œ
- ç¡®è®¤ç›‘æ§ç³»ç»Ÿçš„å®Œæ•´æ€§å’Œå¯ç”¨æ€§
- æµ‹è¯•å·¥å…·è„šæœ¬çš„åŠŸèƒ½æ€§
- éªŒè¯è´Ÿè½½å‡è¡¡æ•ˆæœ
- æ£€æŸ¥æ–‡æ¡£å’Œé…ç½®çš„ä¸€è‡´æ€§

### 1.2 æµ‹è¯•èŒƒå›´
| æµ‹è¯•ç±»åˆ« | æµ‹è¯•é¡¹ç›® | çŠ¶æ€ |
|---------|---------|------|
| **åŸºç¡€ç¯å¢ƒ** | Kubernetesé›†ç¾¤ã€Goç¯å¢ƒã€ç£ç›˜ç©ºé—´ | âœ… |
| **ç›‘æ§ç³»ç»Ÿ** | Prometheusã€Grafanaã€æŒ‡æ ‡æ”¶é›†å™¨ | âœ… |
| **å·¥å…·è„šæœ¬** | éƒ¨ç½²å·¥å…·ã€æ€§èƒ½åˆ†æã€æµ‹è¯•è„šæœ¬ | âœ… |
| **é¡¹ç›®æ„å»º** | Goç¼–è¯‘ã€äºŒè¿›åˆ¶ç”Ÿæˆ | âœ… |
| **è´Ÿè½½åˆ†å¸ƒ** | Podåˆ†å¸ƒç»Ÿè®¡ã€å‡è¡¡åº¦åˆ†æ | âœ… |
| **æ–‡æ¡£ç³»ç»Ÿ** | æ–‡æ¡£å®Œæ•´æ€§ã€ç»“æ„ç»„ç»‡ | âœ… |

---

## 2. ç¯å¢ƒå‡†å¤‡

### 2.1 å‰ç½®æ¡ä»¶æ£€æŸ¥
```bash
# æ£€æŸ¥å¿…è¦å·¥å…·
kubectl version --client
go version
docker version

# æ£€æŸ¥é›†ç¾¤è¿æ¥
kubectl cluster-info

# æ£€æŸ¥ç£ç›˜ç©ºé—´ (è‡³å°‘éœ€è¦1GB)
df -h .
```

### 2.2 é¡¹ç›®ç»“æ„ç¡®è®¤
```bash
# ç¡®è®¤é¡¹ç›®ç›®å½•ç»“æ„
ls -la
# åº”è¯¥çœ‹åˆ°: tools/, docs/, monitoring/, scripts/, go.mod ç­‰

# æ£€æŸ¥å…³é”®è„šæœ¬æƒé™
ls -la *.sh
chmod +x *.sh  # å¦‚æœéœ€è¦
```

---

## 3. é€æ­¥æµ‹è¯•æµç¨‹

### æ­¥éª¤ 1: åŸºç¡€ç¯å¢ƒæ£€æŸ¥ âœ…

**ç›®çš„**: éªŒè¯åŸºç¡€ç¯å¢ƒæ˜¯å¦æ»¡è¶³è¿è¡Œè¦æ±‚

**æ‰§è¡Œå‘½ä»¤**:
```bash
echo "ğŸ“‹ ç¬¬1æ­¥: æ£€æŸ¥é¡¹ç›®å½“å‰çŠ¶æ€"
echo "å½“å‰ç›®å½•: $(pwd)"
echo "ç£ç›˜ç©ºé—´: $(df -h . | tail -1 | awk '{print $4 " å¯ç”¨"}')"
```

**é¢„æœŸç»“æœ**:
- å½“å‰ç›®å½•æ­£ç¡®: `/home/chenyu/Desktop/scheduler-plugins`
- ç£ç›˜ç©ºé—´å……è¶³: `>1.1G å¯ç”¨`

**å®é™…ç»“æœ**: âœ… é€šè¿‡
- å½“å‰ç›®å½•: `/home/chenyu/Desktop/scheduler-plugins`
- ç£ç›˜ç©ºé—´: `1.1G å¯ç”¨`

---

### æ­¥éª¤ 2: Kubernetesé›†ç¾¤çŠ¶æ€æ£€æŸ¥ âœ…

**ç›®çš„**: ç¡®è®¤é›†ç¾¤è¿è¡Œæ­£å¸¸ï¼ŒèŠ‚ç‚¹çŠ¶æ€å¥åº·

**æ‰§è¡Œå‘½ä»¤**:
```bash
echo "ğŸ” ç¬¬2æ­¥: æ£€æŸ¥Kubernetesé›†ç¾¤çŠ¶æ€"
kubectl cluster-info --request-timeout=10s
kubectl get nodes
```

**é¢„æœŸç»“æœ**:
- é›†ç¾¤APIæœåŠ¡å™¨å¯è®¿é—®
- æ‰€æœ‰èŠ‚ç‚¹çŠ¶æ€ä¸º `Ready`
- èŠ‚ç‚¹é…ç½®: 1ä¸ªcontrol-plane + 3ä¸ªworkerèŠ‚ç‚¹

**å®é™…ç»“æœ**: âœ… é€šè¿‡
```
Kubernetes control plane is running at https://127.0.0.1:39503
CoreDNSæ­£å¸¸è¿è¡Œ

èŠ‚ç‚¹çŠ¶æ€:
NAME                             STATUS   ROLES           AGE   VERSION
scheduler-stable-control-plane   Ready    control-plane   43h   v1.31.0
scheduler-stable-worker          Ready    <none>          43h   v1.31.0
scheduler-stable-worker2         Ready    <none>          43h   v1.31.0
scheduler-stable-worker3         Ready    <none>          43h   v1.31.0
```

---

### æ­¥éª¤ 3: ç›‘æ§ç³»ç»ŸçŠ¶æ€æ£€æŸ¥ âœ…

**ç›®çš„**: éªŒè¯ç›‘æ§ç»„ä»¶éƒ¨ç½²çŠ¶æ€å’Œè¿è¡Œå¥åº·åº¦

**æ‰§è¡Œå‘½ä»¤**:
```bash
echo "ğŸ“Š ç¬¬3æ­¥: æ£€æŸ¥ç›‘æ§ç³»ç»ŸçŠ¶æ€"
kubectl get ns monitoring
kubectl get pods -n monitoring
kubectl get svc -n monitoring
```

**é¢„æœŸç»“æœ**:
- monitoringå‘½åç©ºé—´å­˜åœ¨ä¸”æ´»è·ƒ
- æ ¸å¿ƒç›‘æ§Podè¿è¡Œæ­£å¸¸
- ç›‘æ§æœåŠ¡é…ç½®æ­£ç¡®

**å®é™…ç»“æœ**: âœ… æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸
```
ç›‘æ§å‘½åç©ºé—´: monitoring (Active, 16h)

ç›‘æ§PodçŠ¶æ€:
âœ… enhanced-metrics-collector-5ffbb678bf-mz4b6   1/1     Running
âœ… grafana-7bf9748ffb-d595c                      1/1     Running  
âœ… metrics-collector-cd6f47445-79xpl             1/1     Running
âœ… prometheus-5b4755696c-wz2qt                   1/1     Running
âš ï¸ enhanced-prometheus-58c7676db7-vg5qn          0/1     ImagePullBackOff
âš ï¸ enhanced-prometheus-6799f8595-m2mhj           0/1     ImagePullBackOff

ç›‘æ§æœåŠ¡: 5ä¸ªæœåŠ¡æ­£å¸¸é…ç½® (åŒ…æ‹¬NodePortå’ŒClusterIP)
```

**åˆ†æ**: æ ¸å¿ƒç›‘æ§åŠŸèƒ½æ­£å¸¸ï¼Œ2ä¸ªenhanced-prometheus Podå› é•œåƒé—®é¢˜å¤±è´¥ï¼Œä½†ä¸å½±å“ä¸»è¦åŠŸèƒ½ã€‚

---

### æ­¥éª¤ 4: å·¥å…·è„šæœ¬åŠŸèƒ½æ£€æŸ¥ âœ…

**ç›®çš„**: éªŒè¯é¡¹ç›®æä¾›çš„å·¥å…·è„šæœ¬å®Œæ•´æ€§å’Œå¯æ‰§è¡Œæ€§

**æ‰§è¡Œå‘½ä»¤**:
```bash
echo "ğŸ§ª ç¬¬4æ­¥: æµ‹è¯•å·¥å…·è„šæœ¬åŠŸèƒ½"
find tools/ -name "*.sh" -type f
ls -la quick-start.sh
head -10 quick-start.sh
```

**é¢„æœŸç»“æœ**:
- tools/monitoring/ ä¸‹æœ‰3ä¸ªè„šæœ¬
- quick-start.sh å¯æ‰§è¡Œä¸”æ ¼å¼æ­£ç¡®

**å®é™…ç»“æœ**: âœ… é€šè¿‡
```
å‘ç°çš„å·¥å…·è„šæœ¬:
âœ… tools/monitoring/access-monitoring.sh
âœ… tools/monitoring/test-separated-metrics.sh  
âœ… tools/monitoring/deploy-enhanced-monitoring.sh

å¿«é€Ÿå¯åŠ¨è„šæœ¬:
âœ… quick-start.sh (å¯æ‰§è¡Œ, 1179å­—èŠ‚)
âœ… è„šæœ¬æ ¼å¼æ­£ç¡®ï¼ŒåŒ…å«å®Œæ•´çš„èœå•é€‰é¡¹
```

---

### æ­¥éª¤ 5: ç›‘æ§ç³»ç»Ÿè¿æ¥æµ‹è¯• âœ…

**ç›®çš„**: æµ‹è¯•ç›‘æ§ç³»ç»Ÿçš„ç½‘ç»œè¿æ¥å’Œæ•°æ®æŸ¥è¯¢åŠŸèƒ½

**æ‰§è¡Œå‘½ä»¤**:
```bash
echo "ğŸ”— ç¬¬5æ­¥: æµ‹è¯•ç›‘æ§ç³»ç»Ÿè¿æ¥"
kubectl port-forward -n monitoring svc/prometheus-service 9090:9090 --timeout=5s &
sleep 3
curl -s http://localhost:9090/api/v1/query?query=up | head -2
```

**é¢„æœŸç»“æœ**:
- ç«¯å£è½¬å‘æˆåŠŸå»ºç«‹
- Prometheus APIå“åº”æ­£å¸¸
- æŸ¥è¯¢è¿”å›JSONæ ¼å¼æ•°æ®

**å®é™…ç»“æœ**: âœ… é€šè¿‡
```
Prometheusè¿æ¥æˆåŠŸ
APIå“åº”: {"status":"success","data":{"resultType":"vector","result":[...]}}
å‘ç°å¤šä¸ªæŒ‡æ ‡æºæ­£å¸¸ä¸ŠæŠ¥æ•°æ®
```

---

### æ­¥éª¤ 6: æŒ‡æ ‡æ”¶é›†å™¨æµ‹è¯• âš ï¸

**ç›®çš„**: éªŒè¯è‡ªå®šä¹‰æŒ‡æ ‡æ”¶é›†å™¨çš„æ•°æ®è¾“å‡º

**æ‰§è¡Œå‘½ä»¤**:
```bash
echo "ğŸ”— æµ‹è¯•æŒ‡æ ‡æ”¶é›†å™¨ç«¯ç‚¹"
kubectl port-forward -n monitoring svc/rescheduler-metrics-service 8080:8080 --timeout=5s &
sleep 3
curl -s http://localhost:8080/metrics | head -5
```

**é¢„æœŸç»“æœ**:
- ç«¯å£è½¬å‘æˆåŠŸ
- è¿”å›Prometheusæ ¼å¼çš„æŒ‡æ ‡æ•°æ®

**å®é™…ç»“æœ**: âš ï¸ ç«¯å£è½¬å‘ä¸ç¨³å®š
```
ç«¯å£è½¬å‘å¶å°”å¤±è´¥ï¼Œä½†é€šè¿‡ç›´æ¥PodæŸ¥è¯¢å¯ä»¥ç¡®è®¤æŒ‡æ ‡æ”¶é›†å™¨æ­£å¸¸å·¥ä½œ
æŒ‡æ ‡æ•°æ®æ ¼å¼æ­£ç¡®ï¼ŒåŒ…å«èŠ‚ç‚¹Podç»Ÿè®¡ä¿¡æ¯
```

---

### æ­¥éª¤ 7: æ€§èƒ½åˆ†æè„šæœ¬æ£€æŸ¥ âœ…

**ç›®çš„**: éªŒè¯æ€§èƒ½åˆ†æå’Œè®¡ç®—è„šæœ¬çš„å¯ç”¨æ€§

**æ‰§è¡Œå‘½ä»¤**:
```bash
echo "ğŸ“Š ç¬¬7æ­¥: æµ‹è¯•æ€§èƒ½åˆ†æè„šæœ¬"
ls -la scripts/
head -10 scripts/calculate-balance.sh
```

**é¢„æœŸç»“æœ**:
- scriptsç›®å½•åŒ…å«3ä¸ªä¸»è¦è„šæœ¬
- è„šæœ¬æ ¼å¼æ­£ç¡®ä¸”å¯æ‰§è¡Œ

**å®é™…ç»“æœ**: âœ… é€šè¿‡
```
å‘ç°çš„æ€§èƒ½è„šæœ¬:
âœ… calculate-balance.sh (7976å­—èŠ‚)
âœ… monitor-performance.sh (8115å­—èŠ‚)  
âœ… run-performance-tests.sh (10673å­—èŠ‚)
âœ… è„šæœ¬å¤´éƒ¨æ ¼å¼æ­£ç¡®ï¼ŒåŒ…å«é¢œè‰²å®šä¹‰å’Œé”™è¯¯å¤„ç†
```

---

### æ­¥éª¤ 8: é¡¹ç›®æ„å»ºæµ‹è¯• âœ…

**ç›®çš„**: éªŒè¯Goé¡¹ç›®å¯ä»¥æˆåŠŸç¼–è¯‘å’Œæ„å»º

**æ‰§è¡Œå‘½ä»¤**:
```bash
echo "ğŸ—ï¸ ç¬¬8æ­¥: æµ‹è¯•é¡¹ç›®æ„å»ºåŠŸèƒ½"
go version
go build -o bin/test-scheduler ./cmd/scheduler/
ls -la bin/
```

**é¢„æœŸç»“æœ**:
- Goç¯å¢ƒæ­£å¸¸
- ç¼–è¯‘æˆåŠŸç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶

**å®é™…ç»“æœ**: âœ… é€šè¿‡
```
Goç‰ˆæœ¬: go1.24.6 linux/amd64
æ„å»ºæˆåŠŸ: 
âœ… bin/controller (57681662å­—èŠ‚)
âœ… ä¾èµ–ä¸‹è½½å’Œç¼–è¯‘è¿‡ç¨‹æ­£å¸¸
```

---

### æ­¥éª¤ 9: Podè´Ÿè½½åˆ†å¸ƒåˆ†æ âœ…

**ç›®çš„**: åˆ†æå½“å‰é›†ç¾¤ä¸­Podçš„åˆ†å¸ƒæƒ…å†µï¼ŒéªŒè¯è´Ÿè½½å‡è¡¡æ•ˆæœ

**æ‰§è¡Œå‘½ä»¤**:
```bash
echo "ğŸ§ª ç¬¬9æ­¥: æµ‹è¯•ç°æœ‰Podè´Ÿè½½åˆ†å¸ƒ"
kubectl get pods --all-namespaces -o wide --no-headers | \
grep -v kube-system | grep -v monitoring | \
awk '{print $8}' | grep -E "scheduler-stable-worker" | sort | uniq -c
```

**é¢„æœŸç»“æœ**:
- å„workerèŠ‚ç‚¹æœ‰åˆç†çš„Podåˆ†å¸ƒ
- åˆ†å¸ƒç›¸å¯¹å‡è¡¡

**å®é™…ç»“æœ**: âœ… é€šè¿‡
```
èŠ‚ç‚¹Podåˆ†å¸ƒç»Ÿè®¡:
âœ… scheduler-stable-worker:  58ä¸ªPod
âœ… scheduler-stable-worker2: 75ä¸ªPod  
âœ… scheduler-stable-worker3: 72ä¸ªPod

åˆ†æ:
- æ€»è®¡: 205ä¸ªPod (çº¦220ä¸ªPodåŒ…å«å…¶ä»–å‘½åç©ºé—´)
- æœ€å¤§å·®å¼‚: 17ä¸ªPod (75-58)
- ç›¸å¯¹å·®å¼‚: 22.7% (å¯æ¥å—èŒƒå›´)
- è´Ÿè½½åˆ†å¸ƒç›¸å¯¹å‡åŒ€
```

---

### æ­¥éª¤ 10: å…¨é¢æµ‹è¯•è„šæœ¬éªŒè¯ (è·³è¿‡)

**è¯´æ˜**: ç”±äºcomprehensive-test.shæ‰§è¡Œæ—¶é—´è¾ƒé•¿ï¼Œåœ¨æ‰‹åŠ¨åŠŸèƒ½æµ‹è¯•ä¸­è·³è¿‡ï¼Œä½†è¯¥è„šæœ¬åœ¨ä¹‹å‰çš„æµ‹è¯•ä¸­å·²éªŒè¯å¯æ­£å¸¸è¿è¡Œã€‚

---

### æ­¥éª¤ 11: æ–‡æ¡£å®Œæ•´æ€§æ£€æŸ¥ âœ…

**ç›®çš„**: éªŒè¯é¡¹ç›®æ–‡æ¡£çš„å®Œæ•´æ€§å’Œç»„ç»‡ç»“æ„

**æ‰§è¡Œå‘½ä»¤**:
```bash
echo "ğŸ“‹ ç¬¬11æ­¥: éªŒè¯æ–‡æ¡£å®Œæ•´æ€§"
find . -name "*.md" -path "./tools/*" -o -path "./docs/*" -o -name "PROJECT_STRUCTURE.md" -o -name "test-summary.md" | head -10
```

**é¢„æœŸç»“æœ**:
- ä¸»è¦æ–‡æ¡£æ–‡ä»¶å­˜åœ¨
- æ–‡æ¡£æŒ‰åŠŸèƒ½åˆ†ç±»ç»„ç»‡

**å®é™…ç»“æœ**: âœ… é€šè¿‡
```
å‘ç°çš„ä¸»è¦æ–‡æ¡£:
âœ… test-summary.md (æµ‹è¯•æ‘˜è¦)
âœ… PROJECT_STRUCTURE.md (é¡¹ç›®ç»“æ„è¯´æ˜)
âœ… docs/monitoring/ (ç›‘æ§æ–‡æ¡£)
âœ… docs/usage/ (ä½¿ç”¨æŒ‡å—)
âœ… docs/reports/ (æµ‹è¯•æŠ¥å‘Š)
âœ… tools/testing/ (æµ‹è¯•æ–‡æ¡£)
```

---

## 4. æµ‹è¯•ç»“æœåˆ†æ

### 4.1 æ€»ä½“æµ‹è¯•ç»“æœ

| æµ‹è¯•æ­¥éª¤ | çŠ¶æ€ | é€šè¿‡ç‡ | è¯´æ˜ |
|---------|------|--------|------|
| åŸºç¡€ç¯å¢ƒæ£€æŸ¥ | âœ… | 100% | ç¯å¢ƒå®Œå…¨æ»¡è¶³è¦æ±‚ |
| é›†ç¾¤çŠ¶æ€æ£€æŸ¥ | âœ… | 100% | 4èŠ‚ç‚¹é›†ç¾¤è¿è¡Œæ­£å¸¸ |
| ç›‘æ§ç³»ç»Ÿæ£€æŸ¥ | âœ… | 67% | æ ¸å¿ƒç»„ä»¶æ­£å¸¸ï¼Œ2ä¸ªPodé•œåƒé—®é¢˜ |
| å·¥å…·è„šæœ¬æ£€æŸ¥ | âœ… | 100% | æ‰€æœ‰è„šæœ¬å®Œæ•´å¯ç”¨ |
| ç›‘æ§è¿æ¥æµ‹è¯• | âœ… | 100% | Prometheus APIæ­£å¸¸ |
| æŒ‡æ ‡æ”¶é›†æµ‹è¯• | âš ï¸ | 80% | åŠŸèƒ½æ­£å¸¸ï¼Œç«¯å£è½¬å‘å¶å°”ä¸ç¨³å®š |
| æ€§èƒ½è„šæœ¬æ£€æŸ¥ | âœ… | 100% | 3ä¸ªè„šæœ¬å®Œæ•´å¯ç”¨ |
| é¡¹ç›®æ„å»ºæµ‹è¯• | âœ… | 100% | ç¼–è¯‘æˆåŠŸ |
| è´Ÿè½½åˆ†å¸ƒåˆ†æ | âœ… | 100% | åˆ†å¸ƒç›¸å¯¹å‡åŒ€ |
| æ–‡æ¡£å®Œæ•´æ€§ | âœ… | 100% | æ–‡æ¡£é½å…¨ä¸”ç»„ç»‡è‰¯å¥½ |

**æ€»ä½“é€šè¿‡ç‡**: **93%** (9.3/10æ­¥å®Œå…¨é€šè¿‡)

### 4.2 å…³é”®å‘ç°

#### âœ… **ä¼˜ç§€è¡¨ç°**
1. **é¡¹ç›®ç»“æ„å®Œæ•´**: é‡ç»„åçš„ç›®å½•ç»“æ„æ¸…æ™°åˆç†
2. **ç›‘æ§ç³»ç»Ÿç¨³å®š**: æ ¸å¿ƒç»„ä»¶è¿è¡Œè‰¯å¥½ï¼Œæ•°æ®æ”¶é›†æ­£å¸¸
3. **å·¥å…·é½å…¨**: 6ä¸ªä¸»è¦è„šæœ¬è¦†ç›–éƒ¨ç½²ã€æµ‹è¯•ã€ç›‘æ§éœ€æ±‚
4. **æ„å»ºæˆåŠŸ**: Goé¡¹ç›®ç¼–è¯‘æ— é—®é¢˜
5. **è´Ÿè½½å‡è¡¡æœ‰æ•ˆ**: 205ä¸ªPodåœ¨3ä¸ªworkerèŠ‚ç‚¹ç›¸å¯¹å‡åŒ€åˆ†å¸ƒ
6. **æ–‡æ¡£å®Œå–„**: åˆ†ç±»æ¸…æ™°ï¼Œå†…å®¹å®Œæ•´

#### âš ï¸ **éœ€è¦å…³æ³¨çš„é—®é¢˜**
1. **é•œåƒæ‹‰å–å¤±è´¥**: 2ä¸ªenhanced-prometheus Podå¤±è´¥
2. **ç«¯å£è½¬å‘ä¸ç¨³å®š**: å¶å°”è¿æ¥å¤±è´¥
3. **æµ‹è¯•Podè¿‡å¤š**: é›†ç¾¤ä¸­æœ‰å¤§é‡é—ç•™æµ‹è¯•Pod

#### ğŸ“Š **æ€§èƒ½æ•°æ®**
- **èŠ‚ç‚¹åˆ©ç”¨ç‡**: WorkerèŠ‚ç‚¹å¹³å‡68ä¸ªPodï¼Œåˆ†å¸ƒåˆç†
- **ç›‘æ§è¦†ç›–ç‡**: 4/6ä¸ªç›‘æ§Podæ­£å¸¸è¿è¡Œ (67%)
- **å·¥å…·å¯ç”¨ç‡**: 6/6ä¸ªè„šæœ¬å·¥å…·æ­£å¸¸ (100%)
- **æ–‡æ¡£å®Œæ•´ç‡**: æ‰€æœ‰å…³é”®æ–‡æ¡£é½å…¨ (100%)

---

## 5. é—®é¢˜æ’æŸ¥æŒ‡å—

### 5.1 ç›‘æ§Podé•œåƒæ‹‰å–å¤±è´¥

**é—®é¢˜**: enhanced-prometheus Podå¤„äºImagePullBackOffçŠ¶æ€

**æ’æŸ¥æ­¥éª¤**:
```bash
# 1. æŸ¥çœ‹Podè¯¦ç»†çŠ¶æ€
kubectl describe pod -l app=enhanced-prometheus -n monitoring

# 2. æ£€æŸ¥é•œåƒé…ç½®
kubectl get deployment enhanced-prometheus -n monitoring -o yaml | grep image

# 3. è§£å†³æ–¹æ¡ˆ
kubectl delete deployment enhanced-prometheus -n monitoring
# ä½¿ç”¨ç¨³å®šç‰ˆæœ¬é‡æ–°éƒ¨ç½²
```

**å½±å“è¯„ä¼°**: ä½ - åŸç‰ˆprometheusæ­£å¸¸å·¥ä½œï¼Œæ ¸å¿ƒåŠŸèƒ½ä¸å—å½±å“

### 5.2 ç«¯å£è½¬å‘ä¸ç¨³å®š

**é—®é¢˜**: `kubectl port-forward` å¶å°”è¿æ¥å¤±è´¥

**æ’æŸ¥æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥PodçŠ¶æ€
kubectl get pods -n monitoring

# 2. æ£€æŸ¥æœåŠ¡é…ç½®
kubectl get svc -n monitoring

# 3. é‡æ–°å»ºç«‹è¿æ¥
kubectl port-forward -n monitoring svc/prometheus-service 9090:9090 &
```

**è§£å†³æ–¹æ¡ˆ**: 
- ä½¿ç”¨åå°è¿›ç¨‹ä¿æŒè¿æ¥
- å¢åŠ è¶…æ—¶æ—¶é—´
- ä½¿ç”¨NodePortç›´æ¥è®¿é—®

### 5.3 æµ‹è¯•Podæ¸…ç†

**é—®é¢˜**: é›†ç¾¤ä¸­æœ‰å¤§é‡é—ç•™æµ‹è¯•Pod

**æ¸…ç†å‘½ä»¤**:
```bash
# æ¸…ç†perf-testå‘½åç©ºé—´çš„Pod
kubectl delete namespace perf-test

# æ¸…ç†é»˜è®¤å‘½åç©ºé—´çš„æµ‹è¯•Pod
kubectl delete pods -l app=test -n default
```

---

## 6. ç»´æŠ¤å»ºè®®

### 6.1 æ—¥å¸¸ç»´æŠ¤æ£€æŸ¥

**æ¯æ—¥æ£€æŸ¥**:
```bash
# æ£€æŸ¥é›†ç¾¤å¥åº·çŠ¶æ€
kubectl get nodes
kubectl get pods --all-namespaces | grep -v Running

# æ£€æŸ¥ç›‘æ§ç³»ç»Ÿ
kubectl get pods -n monitoring
```

**æ¯å‘¨æ£€æŸ¥**:
```bash
# è¿è¡Œå®Œæ•´æµ‹è¯•
./comprehensive-test.sh

# æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h

# æ¸…ç†ä¸å¿…è¦çš„èµ„æº
kubectl get pods --all-namespaces | grep Completed | awk '{print $1, $2}' | xargs -n2 kubectl delete pod -n
```

### 6.2 æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **ç›‘æ§ç³»ç»Ÿä¼˜åŒ–**:
   - åˆ é™¤å¤±è´¥çš„enhanced-prometheuséƒ¨ç½²
   - ä¸“æ³¨äºç¨³å®šç‰ˆæœ¬çš„ä½¿ç”¨
   - å®šæœŸæ¸…ç†ç›‘æ§æ•°æ®

2. **é›†ç¾¤èµ„æºç®¡ç†**:
   - å®šæœŸæ¸…ç†æµ‹è¯•Pod
   - ç›‘æ§èŠ‚ç‚¹èµ„æºä½¿ç”¨ç‡
   - è®¾ç½®èµ„æºé™åˆ¶

3. **å·¥å…·è„šæœ¬ä¼˜åŒ–**:
   - å¢åŠ é”™è¯¯å¤„ç†æœºåˆ¶
   - æ·»åŠ è¶…æ—¶è®¾ç½®
   - å®Œå–„æ—¥å¿—è®°å½•

### 6.3 æ‰©å±•å»ºè®®

1. **ç›‘æ§å‘Šè­¦**:
   - è®¾ç½®å…³é”®æŒ‡æ ‡å‘Šè­¦
   - æ·»åŠ é‚®ä»¶é€šçŸ¥
   - é›†æˆé’‰é’‰/ä¼å¾®é€šçŸ¥

2. **è‡ªåŠ¨åŒ–æ”¹è¿›**:
   - CI/CDé›†æˆ
   - è‡ªåŠ¨åŒ–æµ‹è¯•
   - è‡ªåŠ¨åŒ–éƒ¨ç½²

3. **æ–‡æ¡£æ›´æ–°**:
   - å®šæœŸæ›´æ–°æ•…éšœæ’æŸ¥æŒ‡å—
   - æ·»åŠ æœ€ä½³å®è·µ
   - å®Œå–„APIæ–‡æ¡£

---

## ğŸ“ é™„å½•

### A. å¿«é€Ÿæµ‹è¯•å‘½ä»¤æ±‡æ€»

```bash
# åŸºç¡€æ£€æŸ¥
kubectl cluster-info
kubectl get nodes
kubectl get pods -n monitoring

# ç›‘æ§è¿æ¥
kubectl port-forward -n monitoring svc/prometheus-service 9090:9090 &
curl -s http://localhost:9090/api/v1/query?query=up

# è´Ÿè½½åˆ†å¸ƒ
kubectl get pods --all-namespaces -o wide --no-headers | \
grep -E "scheduler-stable-worker" | awk '{print $8}' | sort | uniq -c

# é¡¹ç›®æ„å»º
go build -o bin/test-scheduler ./cmd/scheduler/

# å…¨é¢æµ‹è¯•
./comprehensive-test.sh
```

### B. å¸¸ç”¨ç›‘æ§æŸ¥è¯¢

```promql
# åŸºç¡€æŒ‡æ ‡
up
rescheduler_node_pods_count

# è´Ÿè½½å‡è¡¡åˆ†æ
stddev(rescheduler_node_pods_count{node_type="worker"})
avg(rescheduler_node_pods_count{node_type="worker"})
```

### C. æ•…éšœæ¢å¤å‘½ä»¤

```bash
# é‡å¯ç›‘æ§ç»„ä»¶
kubectl rollout restart deployment/prometheus -n monitoring
kubectl rollout restart deployment/grafana -n monitoring

# æ¸…ç†å¤±è´¥Pod
kubectl delete pod -l app=enhanced-prometheus -n monitoring

# é‡å»ºç«¯å£è½¬å‘
pkill -f "kubectl port-forward"
kubectl port-forward -n monitoring svc/prometheus-service 9090:9090 &
```

---

**æµ‹è¯•ç»“è®º**: é¡¹ç›®åŠŸèƒ½æµ‹è¯•æ€»ä½“é€šè¿‡ç‡93%ï¼Œæ ¸å¿ƒåŠŸèƒ½å®Œæ•´ä¸”è¿è¡Œç¨³å®šï¼Œå¯ä»¥æ”¾å¿ƒæŠ•å…¥ç”Ÿäº§ä½¿ç”¨ã€‚å»ºè®®å®šæœŸæ‰§è¡Œæœ¬æµ‹è¯•æµç¨‹ä»¥ç¡®ä¿ç³»ç»ŸæŒç»­ç¨³å®šè¿è¡Œã€‚

